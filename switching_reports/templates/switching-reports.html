{% extends 'switching-report-base.html'%}

{% block title %}
Все отчёты о коммутации
{% endblock %}

{% block nav %}
<li class="nav-item active">
    <a class="nav-link" href="/switching_reports/create_switching_report">Создать отчёт о коммутации</a>
</li>
<li class="nav-item active">
    <a class="nav-link" href="/switching_reports/switching_reports">Отчёты о коммутации</a>
</li>
{% endblock %}

{%block body %}
        <form action='sw_filter_reports' method="POST">
            <div style="float: left; margin-left:50px;">
                <div>
                        <label for="sortStartTime">С</label><br>
                        <input type="datetime-local" id="sortStartTime" name="sortStartTime" placeholder="" value="">
                        <br>
                </div>
                <div>
                        <label for="sortEndTime">По</label><br>
                        <input type="datetime-local" id="sortEndTime" name="sortEndTime" placeholder="" value="">
                        <br>
                </div>
                <div>
                    <button class="btn btn-dark btn-lg" type="submit" style="margin-top: 15px;">Искать</button>
                </div>
            </div>
        </form>
        <div class="container mt-5">
            <div class="md-form mt-0">
                <form action="sw_search" method="POST">
                    <input class="form-control" type="text" placeholder="Искать" aria-label="Search" name="search_string">
                </form>
            </div>
            <br>

            <h1>Все отчёты о коммутации</h1>

            {% if switching_reports|length > 0 %}
                {% for sw_rep in switching_reports %}
                <div class="alert alert-info">
                    <h2>{{sw_rep.work_type}} для {{sw_rep.customer}}</h2>
                    <p><b>Дата создания:</b> {{ sw_rep.date }}</p>
                    <p><b>Состав смены:</b> {{sw_rep.shift_comp}}</p>
                    <p><b>Начало трансляции:</b> {{sw_rep.start_time}}</p>
                    <p><b>Окончание трансляции:</b> {{sw_rep.end_time}}</p>
                    <p><b>Основной источник:</b> {{sw_rep.source}}</p>
                    <p><b>Основное направление:</b> {{sw_rep.destination}}</p>
                    <p><b>Резервный источник:</b> {{sw_rep.reserve_source}}</p>
                    <p><b>Резервное направление:</b> {{sw_rep.reserve_destination}}</p>
                    <a href="id={{ sw_rep.id }}">Подробнее..</a>
                </div>
                {% endfor %}
            {% else %}
                <p>No switching reports were found in database.</p>
            {% endif %}
        </div>
{% endblock %}