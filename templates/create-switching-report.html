{% extends 'base.html'%}

{% block title %}
Создать отчёт о коммутации
{% endblock %}

{% block add_scripts %}
        <script>
            function chooseWorkType(Button) {
                var select = document.getElementById('switchingReportWorkType');
                select.value = Button.textContent;
            }
        </script>
        <script>
            function chooseCustomer(Button) {
                var select = document.getElementById('switchingCustomer');
                select.value = Button.textContent;
            }
        </script>
{% endblock %}

{%block body %}
        <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
          <nav class="my-2 my-md-0 mr-md-3">
            <a class="p-2 text-dark" href="/create-report">Создать инженерный отчёт</a>
            <a class="p-2 text-dark" href="#">Создать отчёт о коммутации</a>
            <a class="p-2 text-dark" href="/reports">Инженерные отчёты</a>
              <a class="p-2 text-dark" href="/switching-reports">Отчёты о коммутации</a>
          </nav>
        </div>
        <div class="container">
            <form method="post">
                <div id='input-form-2' class="col-md-6 mb-3" style="float: right;">
                    <label for="switchingReportRemarks">Замечания</label>
                    <textarea class="form-control" id="switchingReportRemarks" name="switchingReportRemarks" rows="13" cols="50" placeholder=""></textarea>
                </div>
                <div id='input-form' class="col-md-6 mb-3">
                    <label for="switchingReportWorkType">Тип работ</label>
                    <div class="input-group mb-3">
                      <select class="custom-select" id="switchingReportWorkType" name="switchingReportWorkType">
                          <option selected>Выберите тип работ</option>
                        {% for work_type in work_types %}
                            <option value="{{ work_type }}">{{ work_type }}</option>
                        {% endfor %}
                      </select>
                    </div>

                    {% if work_types|length > 0 %}
                        {% for work_type in work_types%}
                            <button class="btn btn-warning" type="button" onclick="chooseWorkType(this)" name="{{work_type}}_button">{{ work_type }}</button>
                        {% endfor %}
                    {% endif %}
                    <br>
                    <hr class="mb-4">

                    <label for="switchingCustomer">Заказчик</label>
                    <div class="input-group mb-3">
                      <select class="custom-select" id="switchingCustomer" name="switchingCustomer">
                          <option selected>Выберите заказчика</option>
                        {% for customer in customers %}
                            <option value="{{ customer }}">{{ customer }}</option>
                        {% endfor %}
                      </select>
                    </div>

                    {% if customers|length > 0 %}
                        {% for cust in customers%}
                            <button class="btn btn-warning" type="button" onclick="chooseCustomer(this)" name="{{cust}}_button">{{ cust }}</button>
                        {% endfor %}
                    {% endif %}
                    <br>
                    <hr class="mb-4">

                    <label for="shiftComp">Состав смены</label>
                    <div class="input-group mb-3">
                      <select class="custom-select" id="shiftComp" name="shiftComp">
                          <option selected>Выберите смену</option>
                        {% for shift in shifts %}
                            <option value="{{ shift }}">{{ shift }}</option>
                        {% endfor %}
                      </select>
                    </div>

                    <label for="translationStartTime">Начало трансляции</label><br>
                    <input type="datetime-local" id="translationStartTime" name="translationStartTime" placeholder="" value="" required="">
                    <div class="invalid-feedback">
                      Valid start time is required.
                    </div>
                    <br>

                    <label for="translationEndTime">Окончание трансляции</label><br>
                    <input type="datetime-local"  id="translationEndTime" name="translationEndTime" placeholder="" value="" required="">
                    <div class="invalid-feedback">
                      Valid end time is required.
                    </div>
                    <br>

                    <label for="switchingSource">Источник</label>
                    <input type="text" class="form-control" id="switchingSource" name="switchingSource" placeholder="" value="" required="" maxlength="50">
                    <div class="invalid-feedback">
                      Switching source is required
                    </div>

                    <label for="switchingDestination">Направление</label>
                    <input type="text" class="form-control" id="switchingDestination" name="switchingDestination" placeholder="" value="" required="" maxlength="50">
                    <div class="invalid-feedback">
                      Switching destination is required
                    </div>

                    <label for="switchingReportComment">Комментарий</label>
                    <textarea class="form-control" id="switchingReportComment" name="switchingReportComment" rows="10" cols="50" placeholder=""></textarea>

                    <hr class="mb-4">
                    <button class="btn btn-primary btn-lg btn-block" type="submit">Отправить отчёт</button>
                </div>
            </form>
        </div>
{% endblock %}
